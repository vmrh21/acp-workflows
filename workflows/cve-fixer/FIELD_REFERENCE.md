# CVE Fixer - Field Reference

This document provides detailed information about the configuration fields in `.ambient/ambient.json`.

## Required Fields

### name
- **Type:** string
- **Purpose:** Display name shown in ACP UI
- **Current Value:** "CVE Fixer"
- **Guidelines:** Keep concise (2-5 words), use title case

### description
- **Type:** string
- **Purpose:** Explains workflow purpose in UI
- **Current Value:** "Scan and fix CVE vulnerabilities in user repositories"
- **Guidelines:** 1-3 sentences, clear and specific

### systemPrompt
- **Type:** string
- **Purpose:** Defines AI agent's role and behavior
- **Current Value:** See `.ambient/ambient.json`
- **Guidelines:**
  - Start with clear role definition
  - List key responsibilities
  - Reference available commands
  - Specify output locations
  - For CVE workflows: emphasize asking for repository

### startupPrompt
- **Type:** string
- **Purpose:** Initial message when workflow activates
- **Current Value:** See `.ambient/ambient.json`
- **Guidelines:**
  - Greet user warmly
  - List available commands
  - Provide clear next steps
  - Ask for repository information

## Optional Fields

### results
- **Type:** object with string values
- **Purpose:** Maps artifact types to file paths
- **Current Value:**
  ```json
  {
    "Scan Results": "artifacts/cve-fixer/scans/**/*.json",
    "Security Reports": "artifacts/cve-fixer/reports/**/*.md"
  }
  ```
- **Guidelines:** Use glob patterns to match multiple files

### version
- **Type:** string
- **Example:** "1.0.0"
- **Purpose:** Track workflow configuration version

### author
- **Type:** string or object
- **Example:** {"name": "Your Name", "email": "you@example.com"}
- **Purpose:** Identify workflow creator

### tags
- **Type:** array of strings
- **Example:** ["security", "cve", "vulnerability-scanning"]
- **Purpose:** Categorize workflow for discovery

### icon
- **Type:** string (emoji)
- **Example:** "ðŸ”’"
- **Purpose:** Visual identifier in UI

## Customization Examples

### Adding a new output type
```json
"results": {
  "Scan Results": "artifacts/cve-fixer/scans/**/*.json",
  "Security Reports": "artifacts/cve-fixer/reports/**/*.md",
  "Remediation Plans": "artifacts/cve-fixer/plans/**/*.md"
}
```

### Changing artifact location
Update all references to the artifact path in:
1. `systemPrompt` - OUTPUT LOCATIONS section
2. `results` - Update file paths
3. Command files - Update ## Output sections

### Adding environment configuration
```json
"environment": {
  "ARTIFACTS_DIR": "artifacts/cve-fixer",
  "LOG_LEVEL": "info",
  "CVE_DB_URL": "https://services.nvd.nist.gov/rest/json/cves/2.0"
}
```

## Agent Files

Agent persona files are located in `.claude/agents/` and follow this structure:

```markdown
# {Name} - {Role}
## Role
## Expertise
## Responsibilities
## Communication Style
## When to Invoke
## Tools and Techniques
## Key Principles
## Example Artifacts
```

**Current agents:**
- `security-engineer.md` - Vulnerability assessment specialist

## Command Files

Slash command files are located in `.claude/commands/` and follow this structure:

```markdown
# /{command-name} - {Description}
## Purpose
## Prerequisites
## Process
## Output
## Usage Examples
## Success Criteria
## Next Steps
## Notes
```

**Current commands:**
- `cve-fixer.scan.md` - Scan repository for CVE vulnerabilities

## File Naming Conventions

- **Workflow directory:** `workflows/cve-fixer/`
- **Agent files:** `{name}-{role}.md` (e.g., `security-engineer.md`)
- **Command files:** `{workflow-prefix}.{phase}.md` (e.g., `cve-fixer.scan.md`)
- **Artifacts:** `artifacts/cve-fixer/{category}/{files}`

## Validation Checklist

Before using this workflow, verify:

- [x] `.ambient/ambient.json` is valid JSON (no comments)
- [x] All required fields are present
- [x] All agent files follow the template structure
- [x] All command files have unique names
- [x] Output paths in config match those in commands
- [x] README.md accurately describes the workflow
- [x] All file references use correct paths

## Adding New Commands

To add additional phases (analyze, fix, verify, report):

1. **Create command file:** `.claude/commands/cve-fixer.{phase}.md`
2. **Update systemPrompt:** Add command to AVAILABLE COMMANDS section
3. **Update startupPrompt:** Add command to AVAILABLE COMMANDS list
4. **Update README.md:** Document the new phase
5. **Test the command:** Ensure it integrates with existing phases

Example command addition:
```bash
# Create new fix command
touch .claude/commands/cve-fixer.fix.md

# Edit ambient.json to include:
# /cve-fixer.fix - Apply automated fixes to vulnerabilities
```

## References

- [ACP Documentation](https://ambient-code.github.io/vteam)
- [Template Workflow](https://github.com/ambient-code/workflows/tree/main/workflows/template-workflow)
- [Workflow Best Practices](https://ambient-code.github.io/vteam/guides/workflows)
- [NVD CVE Database](https://nvd.nist.gov/)
